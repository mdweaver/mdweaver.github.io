require(ggdag)
p = dagify(distance ~ learning_p ,
deaths ~ learning_m + distance ,
learning_m  ~ timing,
learning_p ~ timing,
exposure = "distance",
outcome = 'deaths',
labels = c("distance" = "Social\nDistancing",
"learning_p" = "Policy\nLearning",
"learning_m" = "Medical\nLearning",
"timing" = "Later Flu",
"deaths" = "Peak\nMortality")
)
dagify(distance ~ learning_p ,
deaths ~ learning_m + distance ,
learning_m  ~ timing,
learning_p ~ timing,
exposure = "distance",
outcome = 'deaths',
labels = c("distance" = "Social\nDistancing",
"learning_p" = "Policy\nLearning",
"learning_m" = "Medical\nLearning",
"timing" = "Later Flu",
"deaths" = "Peak\nMortality")
)  %>%
ggdag_paths(layout = 'tree', text = F, text_col = 'black', shadow = T, node = F) + theme_dag() +
geom_dag_text_repel(force = 0, aes(label = label)) +
theme(legend.position = 'none')
p$data[13, c("direction", "to", "xend", "yend")] = rep(NA, 4)
p
p = dagify(distance ~ learning_p ,
deaths ~ learning_m + distance ,
learning_m  ~ timing,
learning_p ~ timing,
exposure = "distance",
outcome = 'deaths',
labels = c("distance" = "Social\nDistancing",
"learning_p" = "Policy\nLearning",
"learning_m" = "Medical\nLearning",
"timing" = "Later Flu",
"deaths" = "Peak\nMortality")
)  %>%
ggdag_paths(layout = 'tree', text = F, text_col = 'black', shadow = T, node = F) + theme_dag() +
geom_dag_text_repel(force = 0, aes(label = label)) +
theme(legend.position = 'none')
p$data
p$data$direction
p$data[13, c("direction", "to", "xend", "yend")] = rep(NA, 4)
p$data[13, c("direction", "to", "xend", "yend")] = as.list(rep(NA, 4))
p
dagify(work_home ~ education
mandate ~ work_home,
contact ~ work_home
covid ~ mandate + contact ,
exposure = "mandate",
outcome = 'covid',
labels = c("contact" = "Social\nContact",
"education" = "Uni. Educ.",
"mandate" = "Mask Mandate",
"work_home" = "Work frm\nHome",
"covid" = "COVID\nCases")
) %>%
tidy_dagitty(layout='tree') %>%
ggplot(aes(x = x, y = y, xend = xend, yend = yend)) +
geom_dag_edges_link(mapping = aes(label = c('decreases', 'decreases', 'increases', 'increases', 'increases', '')),  angle_calc = "along", label_dodge = unit(c(1,-1,1,-1,1),'lines')) +
geom_dag_text(mapping = aes(label = label), colour = 'black') +
theme_dag() +
scale_adjusted()
require(ggdag)
require(dagitty)
dagify(work_home ~ education
mandate ~ work_home,
contact ~ work_home
covid ~ mandate + contact ,
exposure = "mandate",
outcome = 'covid',
labels = c("contact" = "Social\nContact",
"education" = "Uni. Educ.",
"mandate" = "Mask Mandate",
"work_home" = "Work frm\nHome",
"covid" = "COVID\nCases")
) %>%
tidy_dagitty(layout='tree') %>%
ggplot(aes(x = x, y = y, xend = xend, yend = yend)) +
geom_dag_edges_link(mapping = aes(label = c('decreases', 'decreases', 'increases', 'increases', 'increases', '')),  angle_calc = "along", label_dodge = unit(c(1,-1,1,-1,1),'lines')) +
geom_dag_text(mapping = aes(label = label), colour = 'black') +
theme_dag() +
scale_adjusted()
dagify(work_home ~ education
mandate ~ work_home,
contact ~ work_home
covid ~ mandate + contact ,
exposure = "mandate",
outcome = 'covid',
labels = c("contact" = "Social\nContact",
"education" = "Uni. Educ.",
"mandate" = "Mask Mandate",
"work_home" = "Work frm\nHome",
"covid" = "COVID\nCases")
) %>%
tidy_dagitty(layout='tree') %>%
ggplot(aes(x = x, y = y, xend = xend, yend = yend))
dagify(work_home ~ education
mandate ~ work_home,
contact ~ work_home
covid ~ mandate + contact ,
exposure = "mandate",
outcome = 'covid',
labels = c("contact" = "Social\nContact",
"education" = "Uni. Educ.",
"mandate" = "Mask Mandate",
"work_home" = "Work frm\nHome",
"covid" = "COVID\nCases")
)
dagify(work_home ~ education
mandate ~ work_home,
contact ~ work_home
covid ~ mandate + contact ,
exposure = "mandate",
outcome = 'covid',
labels = c("contact" = "Social\nContact",
"education" = "Uni. Educ.",
"mandate" = "Mask Mandate",
"work_home" = "Work frm\nHome",
"covid" = "COVID\nCases")
)
dagify(work_home ~ education,
mandate ~ work_home,
contact ~ work_home,
covid ~ mandate + contact ,
exposure = "mandate",
outcome = 'covid',
labels = c("contact" = "Social\nContact",
"education" = "Uni. Educ.",
"mandate" = "Mask Mandate",
"work_home" = "Work frm\nHome",
"covid" = "COVID\nCases")
) %>%
tidy_dagitty(layout='tree') %>%
ggplot(aes(x = x, y = y, xend = xend, yend = yend))
dagify(work_home ~ education,
mandate ~ work_home,
contact ~ work_home,
covid ~ mandate + contact ,
exposure = "mandate",
outcome = 'covid',
labels = c("contact" = "Social\nContact",
"education" = "Uni. Educ.",
"mandate" = "Mask Mandate",
"work_home" = "Work frm\nHome",
"covid" = "COVID\nCases")
) %>%
tidy_dagitty(layout='tree') %>%
ggplot(aes(x = x, y = y, xend = xend, yend = yend)) + geom_dag_edges_link()
dagify(work_home ~ education,
mandate ~ work_home,
contact ~ work_home,
covid ~ mandate + contact ,
exposure = "mandate",
outcome = 'covid',
labels = c("contact" = "Social\nContact",
"education" = "Uni. Educ.",
"mandate" = "Mask Mandate",
"work_home" = "Work frm\nHome",
"covid" = "COVID\nCases")
) %>%
tidy_dagitty(layout='tree') %>%
ggplot(aes(x = x, y = y, xend = xend, yend = yend)) +
geom_dag_edges_link() +
geom_dag_text(mapping = aes(label = label), colour = 'black') +
theme_dag() +
scale_adjusted()
dagify(work_home ~ education,
mandate ~ work_home,
contact ~ work_home,
covid ~ mandate + contact ,
mask ~ mandate,
exposure = "mandate",
outcome = 'covid',
labels = c("contact" = "Social\nContact",
"education" = "Univ. Educ.",
"mandate" = "Mask\n Mandate",
"work_home" = "Work from\nHome",
"covid" = "COVID\nCases",
'mask' = 'Wear\nMask')
) %>%
tidy_dagitty(layout='tree') %>%
ggplot(aes(x = x, y = y, xend = xend, yend = yend)) +
geom_dag_edges_link() +
geom_dag_text(mapping = aes(label = label), colour = 'black') +
theme_dag() +
scale_adjusted()
dagify(work_home ~ education,
mandate ~ work_home,
contact ~ work_home,
covid ~ mask + contact ,
mask ~ mandate,
exposure = "mandate",
outcome = 'covid',
labels = c("contact" = "Social\nContact",
"education" = "Univ. Educ.",
"mandate" = "Mask\n Mandate",
"work_home" = "Work from\nHome",
"covid" = "COVID\nCases",
'mask' = 'Wear\nMask')
) %>%
tidy_dagitty(layout='tree') %>%
ggplot(aes(x = x, y = y, xend = xend, yend = yend)) +
geom_dag_edges_link() +
geom_dag_text(mapping = aes(label = label), colour = 'black') +
theme_dag() +
scale_adjusted()
dagify(work_home ~ education,
mandate ~ work_home,
contact ~ work_home,
covid ~ mask + contact ,
mask ~ mandate,
exposure = "mandate",
outcome = 'covid',
labels = c("contact" = "Social\nContact",
"education" = "Univ. Educ.",
"mandate" = "Mask\n Mandate",
"work_home" = "Work from\nHome",
"covid" = "COVID\nCases",
'mask' = 'Wear\nMask')
) %>%
ggdag_paths(layout = 'tree', text = F, text_col = 'black', shadow = T, node = F) + theme_dag() +
geom_dag_text_repel(force = 0, aes(label = label)) +
theme(legend.position = 'none')
p$data
p = dagify(work_home ~ education,
mandate ~ work_home,
contact ~ work_home,
covid ~ mask + contact ,
mask ~ mandate,
exposure = "mandate",
outcome = 'covid',
labels = c("contact" = "Social\nContact",
"education" = "Univ. Educ.",
"mandate" = "Mask\n Mandate",
"work_home" = "Work from\nHome",
"covid" = "COVID\nCases",
'mask' = 'Wear\nMask')
) %>%
ggdag_paths(layout = 'tree', text = F, text_col = 'black', shadow = T, node = F) + theme_dag() +
geom_dag_text_repel(force = 0, aes(label = label)) +
theme(legend.position = 'none')
p$data
p$data[15, c("direction", "to", "xend", "yend")] = as.list(rep(NA, 4))
p
dagify(
covid ~ mandate,
mandate ~ positives ,
exposure = "mandate",
outcome = 'covid',
labels = c("mandate" = "Mask\nMandate",
"covid" = "COVID\nCases",
"positives" = "Test\nPositivity"
)
)  %>%
ggdag_classic(layout = 'auto', text_label = 'label', size = 5) + theme_dag() +
theme(legend.position = 'none')
dagify(
covid ~ mandate,
mandate ~ positives,
test_no ~ positives,
exposure = "mandate",
outcome = 'covid',
labels = c("mandate" = "Mask\nMandate",
"covid" = "COVID\nCases",
"positives" = "Test\nPositivity",
'test_no' = "Number\nof Tests"
)
)  %>%
ggdag_classic(layout = 'auto', text_label = 'label', size = 5) + theme_dag() +
theme(legend.position = 'none')
dagify(
covid ~ mandate,
mandate ~ positives,
test_no ~ positives,
exposure = "mandate",
outcome = 'covid',
labels = c("mandate" = "Mask\nMandate",
"covid" = "COVID\nCases",
"positives" = "Test\nPositivity",
'test_no' = "Number\nof Tests"
)
)  %>%
ggdag_classic(layout = 'auto', text_label = 'label', size = 5) + theme_dag() +
theme(legend.position = 'none') +
scale_adjusted()
dagify(
covid ~ mandate,
mandate ~ positives ,
exposure = "mandate",
outcome = 'covid',
labels = c("mandate" = "Mask\nMandate",
"covid" = "COVID\nCases",
"positives" = "Test\nPositivity"
)
)  %>%
tidy_dagitty(layout='auto') %>%
ggplot(aes(x = x, y = y, xend = xend, yend = yend)) +
geom_dag_edges_link() +
geom_dag_text(mapping = aes(label = label), colour = 'black') +
theme_dag() +
scale_adjusted()
dagify(
covid ~ mandate,
mandate ~ positives,
test_no ~ positives,
exposure = "mandate",
outcome = 'covid',
labels = c("mandate" = "Mask\nMandate",
"covid" = "COVID\nCases",
"positives" = "Test\nPositivity",
'test_no' = "Number\nof Tests"
)
)  %>%
tidy_dagitty(layout='auto') %>%
ggplot(aes(x = x, y = y, xend = xend, yend = yend)) +
geom_dag_edges_link() +
geom_dag_text(mapping = aes(label = label), colour = 'black') +
theme_dag() +
scale_adjusted()
dagify(
covid ~ mandate + stay_home,
mandate ~ positives,
test_no ~ positives,
stay_home ~ positives,
exposure = "mandate",
outcome = 'covid',
labels = c("mandate" = "Mask\nMandate",
"covid" = "COVID\nCases",
"positives" = "Test\nPositivity",
'test_no' = "Number\nof Tests",
'stay_home' = "Stay\nHome"
)
)  %>%
tidy_dagitty(layout='auto') %>%
ggplot(aes(x = x, y = y, xend = xend, yend = yend)) +
geom_dag_edges_link() +
geom_dag_text(mapping = aes(label = label), colour = 'black') +
theme_dag() +
scale_adjusted()
dagify(
covid ~ mandate + superspreader,
mandate ~ positives,
test_no ~ positives,
test_no ~ superspreader,
exposure = "mandate",
outcome = 'covid',
labels = c("mandate" = "Mask\nMandate",
"covid" = "COVID\nCases",
"positives" = "Test\nPositivity",
'test_no' = "Number\nof Tests",
"superspreader" = "Super\nSpreader"
)
)  %>%
tidy_dagitty(layout='auto') %>%
ggplot(aes(x = x, y = y, xend = xend, yend = yend)) +
geom_dag_edges_link() +
geom_dag_text(mapping = aes(label = label), colour = 'black') +
theme_dag() +
scale_adjusted()
dagify(
covid ~ positives,
positives ~  mandate,
exposure = "mandate",
outcome = 'covid',
labels = c("mandate" = "Mask\nMandate",
"covid" = "COVID\nCases",
"positives" = "Mask\nWearing"
)
)  %>%
tidy_dagitty(layout='auto') %>%
ggplot(aes(x = x, y = y, xend = xend, yend = yend)) +
geom_dag_edges_link() +
geom_dag_text(mapping = aes(label = label), colour = 'black') +
theme_dag() +
scale_adjusted()
